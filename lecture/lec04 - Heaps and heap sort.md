# lec04 - Heaps and heap sort
## 基本概念
堆是一种基于数组实现的完全二叉树，每个节点满足一下条件：每个节点小于等于或大于等于其两个子节点。父节点大于等于子节点的被称为**最大堆**，父节点小于等于子节点的被称为**最小堆**。

## 堆的常见操作
**堆化、建堆和堆排序**。

**堆化**（Heapify）指对于一个二叉树其不是堆，但根节点的两个子树都是堆，将二叉树转换为堆的操作被称为堆化。分为自上而下的堆化和自下而上的堆化。

**建堆**（build heap），将一个非堆的数组转换为一个堆的操作被称为建堆。建堆的时间复杂度为$O(n)$，其推导过程非常经典，值得反复回味。

伪代码：
```python
for n/2 to 1:
	healify every element
```

**堆排序**（heap sort），基于堆数据结构完成排序的排序算法。分两步进行：
1. 建堆，时间复杂度$O(n)$。
2. 排序，时间复杂度为$O(nlogn)$。以最大堆为例，将堆顶元素与堆尾元素交换，然后渐次缩小堆（$size-1$）。

## 代码实现
如果存放堆的数组从下标0开始存放数据，那么父子节点的对应关系相对复杂
```python
def left(self, i):
	return 2*i+1

def right(self, i):
	return 2*(i+1)

def parent(self, i):
	return (i+1)//2 - 1
```

如果从下标1开始存放数据，则父子节点的对应关系相对简单
```python
def left(self, i):
	return 2*i

def right(self, i):
	return 2*i+1

def parent(self, i):
	return i//2 
```

自顶向下的堆化，父节点需要与最小的子节点互换，而不是比其小的任意子节点。
